<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>여러개 마커 표시하기</title>
</head>
<body>
<div id="map" style="width:100%;height:350px;"></div>

<script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=f4ca5a497f59209c4926abc82017e9a1"></script>
<script>
  var mapContainer = document.getElementById('map');
  var mapOption = {
    center: new kakao.maps.LatLng(37.566535, 126.9779692),
    level: 12
  };

  var map = new kakao.maps.Map(mapContainer, mapOption);

  var clickCount = 0;


  fetch('output2.json')
          .then(response => response.json())
          .then(positions => {

            var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";

            for (var i = 0; i < positions.length; i++) {

              var imageSize = new kakao.maps.Size(24, 35);


              var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);


              var marker = new kakao.maps.Marker({
                map: map,
                position: new kakao.maps.LatLng(positions[i].latlng[0], positions[i].latlng[1]),
                title: positions[i].title,
                image: markerImage
              });


              kakao.maps.event.addListener(marker, 'click', function() {
                clickCount++;
                if (clickCount % 2 === 0) {
                  if (this.infowindow) {
                    this.infowindow.close();
                    this.infowindow = null;
                  }
                } else {
                  this.infowindow = new kakao.maps.InfoWindow({
                    content: this.getTitle()
                  });

                  this.infowindow.open(map, this);
                }
              });
            }
          })
          .catch(error => console.error('Error:', error));
</script>
</body>
</html>
